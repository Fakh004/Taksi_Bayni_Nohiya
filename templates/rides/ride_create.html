{% extends "base.html" %}
{% block title %}Create Ride{% endblock %}

{% block main %}
<div class="container mx-auto py-10 px-4">
    <div class="max-w-xl mx-auto bg-gray-900 bg-opacity-70 backdrop-blur-md rounded-2xl shadow-lg p-8 animate__animated animate__fadeInUp">

        <!-- Заголовок -->
        <div class="text-center mb-6">
            <div class="w-16 h-16 mx-auto mb-4 rounded-xl flex items-center justify-center"
                 style="background: linear-gradient(135deg, #0d6efd, #1a75ff);">
                <i class="bi bi-plus-lg text-white text-2xl"></i>
            </div>
            <h1 class="text-2xl font-bold text-white">Create New Ride</h1>
            <p class="text-gray-400 text-sm">Fill in ride details below</p>
        </div>

        <!-- Форма -->
        <form method="post" class="space-y-4">
            {% csrf_token %}

            <!-- Выбор водителя -->
            <select name="driver_id" required
                    class="w-full p-3 rounded-lg bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="" disabled selected>Select driver</option>
                {% for driver in drivers %}
                    <option value="{{ driver.id }}">
                        {{ driver.name }} — {{ driver.car_model }}
                    </option>
                {% endfor %}
            </select>

            <!-- Места в машине -->
           <div>
    <p class="text-gray-300 mb-2">Select your seat:</p>
    <div class="flex gap-3">
        {% for seat in available_seats %}
            <button type="submit" name="seat_number" value="{{ seat }}"
                    class="flex-1 px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors duration-300">
                Seat {{ seat }}
            </button>
        {% endfor %}
    </div>
</div>


            <!-- Поля поездки -->
            <input type="text" name="start_location" placeholder="Start Location" required
                   class="w-full p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <input type="text" name="end_location" placeholder="End Location" required
                   class="w-full p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <input type="number" step="0.1" name="distance_km" placeholder="Distance (km)" required
                   class="w-full p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <input type="number" step="0.01" name="price" placeholder="Price" required
                   class="w-full p-3 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500">

            <!-- Статус -->
            <select name="status"
                    class="w-full p-3 rounded-lg bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="in process">Waiting for passengers</option>
                <option value="completed">Completed</option>
                <option value="cancelled">Cancelled</option>
            </select>

            <!-- Кнопки -->
            <div class="flex gap-3 mt-4">
                <button type="submit"
                        class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold transition-colors duration-300">
                    Create
                </button>
                <a href="{% url 'ride_list' %}"
                   class="flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg text-center font-semibold transition-colors duration-300">
                    Cancel
                </a>
            </div>

            {% if error %}
                <p class="text-red-500 mt-2">{{ error }}</p>
            {% endif %}
        </form>
    </div>
</div>

<!-- Анимация -->
<style>
@keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate__animated { animation-duration: 0.6s; }
.animate__fadeInUp { animation-name: fadeInUp; }
</style>
{% endblock %}
